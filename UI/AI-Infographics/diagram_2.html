<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Technical Architectural Diagram: Data Flow (Enhanced)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            color: #333;
            margin: 20px;
            text-align: center;
        }

        svg {
            border: 1px solid #dee2e6;
            background-color: #fff;
            width: 100%;
            max-width: 1200px;
            height: auto;
        }

        .panel {
            filter: url(#shadow);
        }

        .label {
            font-size: 16px;
            font-weight: bold;
        }

        .sub {
            font-size: 12px;
        }

        .icon {
            stroke: #007bff;
            fill: none;
            stroke-width: 2;
            vector-effect: non-scaling-stroke;
        }

        .icon-fill {
            fill: #007bff;
            stroke: none;
            vector-effect: non-scaling-stroke;
        }

        .arrow {
            stroke: #007bff;
            stroke-width: 2;
            fill: none;
            marker-end: url(#arrow);
            vector-effect: non-scaling-stroke;
        }

        .arrowDown {
            stroke: #ed1c24;
            stroke-width: 2;
            fill: none;
            marker-end: url(#arrowDown);
            vector-effect: non-scaling-stroke;
        }
    </style>
</head>

<body>
    <h1 style="color: #007bff; font-size: 24px;">Technical Architectural Diagram: Data Flow</h1>
    <p style="font-size: 14px; color: #6c757d;">A visual representation of the AI validation system, detailing the flow
        of data between key components. (With visual differentiation)</p>

    <svg viewBox="0 0 1200 900" xmlns="http://www.w3.org/2000/svg" role="img"
        aria-labelledby="diagram-title diagram-desc">
        <title id="diagram-title">AI Validation System Data Flow</title>
        <desc id="diagram-desc">Diagram showing data flow from ingestion to AI/ML model layer with CI/CD and monitoring
            panels. Panels include contextual icons, arrows with markers, and accessible grouping.</desc>

        <!-- Definitions: markers, shadows, and reusable icons -->
        <defs>
            <!-- Arrowhead marker -->
            <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="8" markerHeight="8" orient="auto">
                <path d="M0,0 L10,5 L0,10 Z" fill="#007bff" />
            </marker>

            <marker id="arrowDown" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="8" markerHeight="8"
                orient="auto">
                <path d="M0,0 L10,5 L0,10 Z" fill="#ed1c24" />
            </marker>

            <!-- Soft drop shadow -->
            <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
                <feDropShadow dx="0" dy="2" stdDeviation="2" flood-color="#000" flood-opacity="0.12" />
            </filter>

            <!-- Icons (48x48 viewBox for consistent sizing) -->
            <symbol id="icon-doc" viewBox="0 0 48 48">
                <path class="icon" d="M14 6h14l10 10v26H14z" />
                <path class="icon" d="M28 6v10h10" />
                <path class="icon" d="M18 28h18M18 34h18M18 22h12" />
            </symbol>

            <symbol id="icon-user" viewBox="0 0 48 48">
                <circle class="icon" cx="24" cy="16" r="8" />
                <path class="icon" d="M8 38c4-8 28-8 32 0" />
            </symbol>

            <symbol id="icon-key" viewBox="0 0 48 48">
                <circle class="icon" cx="16" cy="24" r="8" />
                <path class="icon" d="M24 24h18" />
                <path class="icon" d="M36 24v6h6" />
            </symbol>

            <symbol id="icon-database" viewBox="0 0 48 48">
                <ellipse class="icon" cx="24" cy="10" rx="16" ry="6" />
                <path class="icon" d="M8 10v20c0 3.3 7.2 6 16 6s16-2.7 16-6V10" />
                <ellipse class="icon" cx="24" cy="30" rx="16" ry="6" />
            </symbol>

            <symbol id="icon-gear" viewBox="0 0 48 48">
                <circle class="icon" cx="24" cy="24" r="6" />
                <!-- simple gear spokes -->
                <g class="icon">
                    <path d="M24 8v6" />
                    <path d="M24 34v6" />
                    <path d="M8 24h6" />
                    <path d="M34 24h6" />
                    <path d="M12 12l4 4" />
                    <path d="M32 32l4 4" />
                    <path d="M12 36l4-4" />
                    <path d="M32 16l4-4" />
                </g>
                <circle class="icon" cx="24" cy="24" r="14" />
            </symbol>

            <symbol id="icon-chip" viewBox="0 0 48 48">
                <rect class="icon" x="10" y="10" width="28" height="28" rx="4" ry="4" />
                <rect class="icon" x="16" y="16" width="16" height="16" rx="2" ry="2" />
                <!-- pins -->
                <g class="icon">
                    <path d="M20 6v6" />
                    <path d="M28 6v6" />
                    <path d="M20 36v6" />
                    <path d="M28 36v6" />
                    <path d="M6 20h6" />
                    <path d="M6 28h6" />
                    <path d="M36 20h6" />
                    <path d="M36 28h6" />
                </g>
            </symbol>

            <symbol id="icon-face" viewBox="0 0 48 48">
                <circle class="icon" cx="24" cy="24" r="18" />
                <circle class="icon" cx="18" cy="20" r="2" />
                <circle class="icon" cx="30" cy="20" r="2" />
                <path class="icon" d="M16 30c4 4 12 4 16 0" />
            </symbol>

            <symbol id="icon-pipeline" viewBox="0 0 48 48">
                <rect class="icon" x="4" y="10" width="12" height="8" rx="2" />
                <rect class="icon" x="18" y="20" width="12" height="8" rx="2" />
                <rect class="icon" x="32" y="30" width="12" height="8" rx="2" />
                <path class="icon" d="M16 14h2l0 10h2" />
                <path class="icon" d="M30 24h2l0 10h2" />
            </symbol>

            <symbol id="icon-shield" viewBox="0 0 48 48">
                <path class="icon" d="M24 6l16 6v12c0 10-8 16-16 20-8-4-16-10-16-20V12z" />
                <path class="icon" d="M16 26l6 6 10-12" />
            </symbol>

            <symbol id="icon-monitor" viewBox="0 0 48 48">
                <rect class="icon" x="6" y="8" width="36" height="26" rx="2" />
                <path class="icon" d="M16 40h16" />
                <path class="icon" d="M12 28l6-6 6 4 8-10" />
            </symbol>
        </defs>

        <!-- Layer 1: Data Ingestion -->
        <g role="group" aria-labelledby="l1-title l1-desc">
            <rect class="panel" x="50" y="50" width="450" height="140" fill="#e3f2fd" stroke="#007bff" stroke-width="2"
                rx="5" ry="5" />
            <text id="l1-title" x="275" y="75" text-anchor="middle" class="label">1. Data Ingestion Layer</text>
            <text id="l1-desc" x="275" y="100" text-anchor="middle" class="sub">Client application securely captures
                user data.</text>
            <text x="275" y="120" text-anchor="middle" class="sub">Payload: 'userId', 'sessionId', 'documentImage',
                'selfieImage'
            </text>
            <text x="275" y="140" text-anchor="middle" class="sub">POST /v1/validate/identity</text>
            <text x="275" y="160" text-anchor="middle" class="sub">UI: Streamlit/Tkinter</text>
            <!-- Icons -->
            <use href="#icon-doc" x="65" y="55" width="32" height="32" aria-hidden="true" />
            <use href="#icon-user" x="115" y="55" width="32" height="32" aria-hidden="true" />
        </g>

        <!-- Arrow -->
        <!-- Arrow going down (shifted slightly right) -->
        <line class="arrow" x1="270" y1="190" x2="270" y2="230" marker-end="url(#arrowhead)" />

        <!-- Arrow going up (shifted slightly left) -->
        <line class="arrowDown" x1="295" y1="230" x2="295" y2="190" marker-start="url(#arrowhead)" />


        <!-- Layer 2: API Gateway -->
        <g role="group" aria-labelledby="l2-title l2-desc">
            <rect class="panel" x="50" y="240" width="450" height="140" fill="#e8f5e9" stroke="#007bff" stroke-width="2"
                rx="5" ry="5" />
            <text id="l2-title" x="275" y="265" text-anchor="middle" class="label">2. Invocation of Validation API</text>
            <text id="l2-desc" x="275" y="290" text-anchor="middle" class="sub">Validates JWT and routes the payload to
                the orchestration service.</text>
            <text x="275" y="310" text-anchor="middle" class="sub">Functionality: Auth, Decryption, Routing</text>
            <text x="275" y="330" text-anchor="middle" class="sub">Request to 'validation-orchestrator-service'</text>
            <!-- Icons -->
            <use href="#icon-key" x="120" y="245" width="32" height="32" aria-hidden="true" />
        </g>

        <!-- Arrow -->
        <!-- Arrow going down (shifted slightly right) -->
        <line class="arrow" x1="270" y1="380" x2="270" y2="420" marker-end="url(#arrowhead)" />

        <!-- Arrow going up (shifted slightly left) -->
        <line class="arrowDown" x1="295" y1="420" x2="295" y2="380" marker-start="url(#arrowhead)" />


        <!-- Layer 3: Backend Services -->
        <g role="group" aria-labelledby="l3-title l3-desc">
            <rect class="panel" x="50" y="430" width="450" height="140" fill="#fffde7" stroke="#007bff" stroke-width="2"
                rx="5" ry="5" />
            <text id="l3-title" x="275" y="455" text-anchor="middle" class="label">3.Invocation of Backend Services</text>
            <text id="l3-desc" x="275" y="480" text-anchor="middle" class="sub">Orchestrates the validation workflow and
                manages state in the database.</text>
            <text x="275" y="500" text-anchor="middle" class="sub">User Service | Validation Service | Database</text>
            <text x="275" y="520" text-anchor="middle" class="sub">API Calls to Models</text>
            <text x="275" y="540" text-anchor="middle" class="sub">Backend: Flask/FastAPI</text>
            <!-- Icons -->
            <use href="#icon-database" x="80" y="435" width="32" height="32" aria-hidden="true" />
            <use href="#icon-gear" x="115" y="432" width="32" height="32" aria-hidden="true" />
        </g>

        <!-- Arrow -->
        <!-- Arrow going down (shifted slightly right) -->
        <line class="arrow" x1="270" y1="570" x2="270" y2="610" marker-end="url(#arrowhead)" />

        <!-- Arrow going up (shifted slightly left) -->
        <line class="arrowDown" x1="295" y1="610" x2="295" y2="570" marker-start="url(#arrowhead)" />


        <!-- Layer 4: AI/ML Model Layer -->
        <g role="group" aria-labelledby="l4-title l4-desc">
            <rect class="panel" x="50" y="620" width="450" height="120" fill="#f3e5f5" stroke="#007bff" stroke-width="2"
                rx="5" ry="5" />
            <text id="l4-title" x="275" y="645" text-anchor="middle" class="label">4. AI/ML Model Layer</text>
            <text id="l4-desc" x="275" y="670" text-anchor="middle" class="sub">Containerized microservices for core AI
                tasks.</text>
            <text x="275" y="690" text-anchor="middle" class="sub">Document OCR Model </text>
            <text x="275" y="710" text-anchor="middle" class="sub">Model: OpenCV/Tensorflow/PIL </text>
            <!-- | Face Verification Model | Liveness Detection Model -->
            <!-- Icons -->
            <use href="#icon-chip" x="110" y="620" width="32" height="32" aria-hidden="true" />
            <!-- <use href="#icon-doc" x="110" y="620" width="32" height="32" aria-hidden="true"/>
      <use href="#icon-face" x="150" y="620" width="32" height="32" aria-hidden="true"/> -->
        </g>

        <!-- Arrow loop back to frontend with labels
    <line class="arrow" x1="500" y1="690" x2="550" y2="690"/>
    <line class="arrow" x1="550" y1="690" x2="550" y2="100"/>
    <line class="arrow" x1="550" y1="100" x2="500" y2="100"/>
    <text x="550" y="390" text-anchor="middle" transform="rotate(-90 550 400)" class="sub">Validation Result (status: SUCCESS/FAILED)</text>
    <text x="550" y="80" text-anchor="middle" class="sub">To frontend</text> -->

        <!-- CI/CD Panel -->
        <g role="group" aria-labelledby="cicd-title cicd-desc">
            <rect class="panel" x="650" y="50" width="450" height="160" fill="#fbe9e7" stroke="#007bff" stroke-width="2"
                rx="5" ry="5" />
            <text id="cicd-title" x="875" y="75" text-anchor="middle" class="label">CI/CD Pipeline*</text>
            <text id="cicd-desc" x="875" y="100" text-anchor="middle" class="sub">Automated pipeline for building,
                testing, and deploying code.</text>
            <text x="875" y="125" text-anchor="middle" class="sub">Trigger: 'git push'</text>
            <text x="875" y="150" text-anchor="middle" class="sub">Workflow: Build → Test → Deploy</text>
            <text x="875" y="175" text-anchor="middle" class="sub">Tools: GitHub Actions, Docker, Kubernetes</text>
            <!-- Icons -->
            <use href="#icon-gear" x="700" y="50" width="32" height="32" aria-hidden="true" />
            <use href="#icon-pipeline" x="750" y="50" width="32" height="32" aria-hidden="true" />
        </g>

        <!-- Security & Monitoring Panel -->
        <g role="group" aria-labelledby="sec-title sec-desc">
            <rect class="panel" x="650" y="300" width="450" height="160" fill="#ffebee" stroke="#007bff"
                stroke-width="2" rx="5" ry="5" />
            <text id="sec-title" x="875" y="325" text-anchor="middle" class="label">Security & Monitoring*</text>
            <text id="sec-desc" x="875" y="350" text-anchor="middle" class="sub">Continuous oversight of system health
                and security.</text>
            <text x="875" y="375" text-anchor="middle" class="sub">Components: Vulnerability Scanning, APM, MLOps</text>
            <text x="875" y="400" text-anchor="middle" class="sub">Monitoring</text>
            <text x="875" y="425" text-anchor="middle" class="sub">Tools: Snyk, Semgrep, Prometheus, Grafana,
                MLflow</text>
            <!-- Icons -->
            <use href="#icon-shield" x="670" y="303" width="32" height="32" aria-hidden="true" />
            <use href="#icon-monitor" x="720" y="304" width="32" height="32" aria-hidden="true" />
        </g>

        <g role="group" aria-labelledby="note-title note-desc">
            <text id="note-title" x="900" y="550" text-anchor="middle" class="label">*Note: CI/CD and Security &
                Monitoring are optional components</text>
            <text id="note-desc" x="900" y="580" text-anchor="middle" class="sub">They can be implemented based on
                project requirements.</text>
        </g>
    </svg>
</body>

</html>